# // Copyright Â© 2011 Steve McCoy and Ethan Burns
# // Licensed under the MIT License. See LICENSE for details.

TARGS := $(TESTS:%=%.test)

all: $(TARGS)

%.test: %.o
	@echo ld -o $@ $< $(LDFLAGS)
	@lod $(LD) -o $@ $(MANDLDFLAGS) $(LDFLAGS) $< $(LIB)
	@echo running $@
	@./$@ && rm $@

$(OFILES): $(HFILES) $(LIB)

%.o: %.c
	@echo cc $< $(CFLAGS)
	@$(CC) -c $(MANDCFLAGS) $(CFLAGS) $<

.PHONY: clean install

clean:
	rm -f *.o test_*
